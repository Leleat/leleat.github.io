---
import "../global.js";
import ArrowDiagonalIcon from "./icons/arrow-diagonal.astro";
import CaretIcon from "./icons/caret.astro";
import XLgIcon from "./icons/x-lg.astro";
---

<footer>
    <small>
        <span>Copyright Â© {new Date().getFullYear()} Anh Tuan Le.</span>
        <a href="/#contact" class="contact-details"> Contact details. </a>
        <span class="credits-container">
            <button class="credits-button" popovertarget="credits-popup">
                <span class="credits-label"
                    >Credits
                    <CaretIcon
                        class="caret-icon"
                        size="10"
                        aria-hidden="true"
                    /></span
                >
            </button>
            <div id="credits-popup" popover>
                <div class="popover-content">
                    <div class="popover-header">
                        <span></span>
                        <h2>Credits</h2>
                        <button
                            class="close-button"
                            aria-label="Close Credits"
                            popovertarget="credits-popup"
                            popovertargetaction="hide"
                        >
                            <XLgIcon size={20} />
                        </button>
                    </div>
                    <ul>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/asterisk/"
                                target="_blank"
                                rel="noreferer"
                                >Asterisk icon (Bootsrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/mastodon/"
                                target="_blank"
                                rel="noreferer"
                                >Mastodon icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/github/"
                                target="_blank"
                                rel="noreferer"
                                >GitHub icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/calendar/"
                                target="_blank"
                                rel="noreferer"
                                >Calendar icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/tags-fill/"
                                target="_blank"
                                rel="noreferer"
                                >Tags icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/chat-square-dots/"
                                >Chat icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/rss-fill/"
                                target="_blank"
                                rel="noreferer"
                                >RSS icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/envelope-fill/"
                                >Envelope icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/chevron-up/"
                                >Chevron-up icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://upload.wikimedia.org/wikipedia/commons/7/7c/Matrix_icon.svg"
                                >Matrix icon (wikimedia)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/play-fill/"
                                >Play icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/pause-fill/"
                                >Pause icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/exclamation-triangle-fill/"
                                >Exclamation Triangle icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/caret-right-fill/"
                                >CaretIcon icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/arrow-up-right/"
                                >Arrow-Up-Right icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a href="https://icons.getbootstrap.com/icons/x-lg/"
                                >X-lg icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a href="https://icons.getbootstrap.com/icons/list/"
                                >Collection icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://icons.getbootstrap.com/icons/grid-3x2-gap-fill/"
                                >Grid 3x2 icon (Bootstrap)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                        <li role="menuitem">
                            <a
                                href="https://gitlab.gnome.org/GNOME/gnome-backgrounds/-/blob/gnome-42/backgrounds/blobs-l.svg"
                                >Blobs Image (Jakub Steiner / GNOME)
                                <ArrowDiagonalIcon
                                    class="dia-arrow"
                                    size="12"
                                    aria-hidden="true"
                                /></a
                            >
                        </li>
                    </ul>
                </div>
            </div>
        </span>
    </small>
</footer>

<style>
    footer {
        --color-text: #999;

        color: var(--color-text);
    }

    small {
        display: flex;
        flex-wrap: wrap-reverse;
        gap: 0.5rem;
        align-items: center;
        justify-content: center;
        padding: 1rem;
    }

    .credits-button {
        color: var(--color-text);
        position: relative;

        &:hover {
            color: var(--color-yellow);
        }
    }

    .credits-label {
        text-decoration: dotted underline;
        position: relative;

        & .caret-icon {
            transition: transform 0.2s;
            position: absolute;
            top: calc(50% - 5px);
            right: -0.75rem;
        }
    }

    .credits-container:has(:popover-open) {
        .credits-label {
            color: var(--color-yellow);
        }

        .caret-icon {
            transform: rotate(-90deg);
            fill: var(--color-yellow);
        }
    }

    body:has(#credits-popup:popover-open) {
        overflow: hidden;
    }

    #credits-popup {
        position: fixed;
        width: unset;
        height: unset;
        inset: 0;
        background-color: var(--color-background);

        .popover-content {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .popover-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;

            h2 {
                color: var(--color-text-dim);
                font-weight: 600;
                font-size: inherit;
                padding-block: 0;
                margin-block: 0;
                /* Hack to center */
                margin-inline-start: 1.5rem;
            }

            .close-button {
                color: var(--color-text-dim);
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                padding: 0.5rem;

                &:hover {
                    transform: translateY(-3px);
                    color: var(--color-yellow);
                }

                &:focus-visible {
                    outline: 2px solid var(--color-rose);
                    outline-offset: 2px;
                }
            }
        }

        ul {
            display: flex;
            flex-direction: column;
            padding-inline: 1.5rem;
            padding-block-end: 2rem;
            flex: 1;
            overflow-y: auto;

            li {
                list-style: none;
                padding-block: 0.75rem;
                margin: 0 auto;
            }

            li > a {
                color: var(--color-yellow);
                display: block;
                text-align: center;

                &:hover {
                    text-decoration: 1px dotted underline;
                }
            }

            li > a > .dia-arrow {
                position: relative;
                top: 0.2rem;
                color: var(--color-yellow);
                margin-inline-start: 1ch;
            }
        }
    }

    .contact-details {
        color: var(--color-text-dim);

        &:hover {
            color: var(--color-yellow);
        }
    }

    @media (min-width: 40rem) {
        #credits-popup {
            position: fixed;
            inset: unset;
            bottom: 3rem;
            right: 3rem;
            border: 1px solid var(--color-text-dark);
            border-radius: 0.5rem;
            padding: 1rem;
            white-space: nowrap;
            box-shadow: 0 0 1rem rgba(0, 0, 0, 0.3);

            .popover-header {
                display: none;
            }

            ul {
                padding-block-end: 1rem;

                li {
                    padding-block: 0.375rem;
                }

                li > a {
                    text-align: left;

                    &:hover {
                        color: var(--color-yellow);
                        text-decoration: none;
                    }
                }
            }

            &:popover-open {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }
        }
    }

    @media (min-width: 60rem) {
        #credits-popup {
            right: unset;
        }
    }

    @media (prefers-reduced-motion: no-preference) {
        .close-button {
            transition:
                transform 0.15s,
                color 0.15s;
        }
    }
</style>
